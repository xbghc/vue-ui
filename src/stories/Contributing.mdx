import { Meta } from '@storybook/blocks';

<Meta title="Development/Contributing" />

# 🤝 贡献指南

感谢您对 **@xbghc/vue-ui** 的关注和贡献！

## 🎯 贡献方式

### 🐛 报告问题

- 提交 Bug 报告
- 建议新功能
- 改进文档

### 💻 代码贡献

- 修复 Bug
- 实现新功能
- 优化性能
- 完善测试

### 📝 文档贡献

- 改进文档内容
- 添加使用示例
- 翻译文档

## 🚀 快速开始

### 1. Fork 项目

点击 GitHub 右上角的 "Fork" 按钮

### 2. 克隆到本地

```bash
git clone https://github.com/your-username/vue-ui.git
cd vue-ui
```

### 3. 创建分支

```bash
git checkout -b feature/your-feature-name
# 或
git checkout -b fix/your-bug-fix
```

### 4. 安装依赖

```bash
pnpm install
# 或
npm install
```

### 5. 开始开发

```bash
# 启动 Storybook 开发环境
npm run storybook
```

## 📋 开发规范

### 🏗️ 分支命名

- `feature/功能名称` - 新功能
- `fix/问题描述` - Bug 修复
- `docs/文档类型` - 文档更新
- `refactor/重构内容` - 代码重构
- `style/样式描述` - 样式调整

### 💬 提交信息格式

```
<type>(<scope>): <description>

[optional body]

[optional footer]
```

#### Type 类型

- `feat`: 新功能
- `fix`: Bug 修复
- `docs`: 文档更新
- `style`: 代码格式调整
- `refactor`: 重构
- `test`: 测试相关
- `chore`: 构建/工具相关

#### 示例

```bash
git commit -m "feat(tooltip): add custom theme support"
git commit -m "fix(tooltip): resolve positioning issue on mobile"
git commit -m "docs(api): update tooltip props documentation"
```

### 🧪 代码规范

#### 现代化优先原则

**不主动兼容旧版本**: 项目采用现代化优先的开发理念，使用最新稳定的 API 和语言特性，不为过时版本提供回退支持。

- 使用最新稳定的 Web API
- 目标环境: ES2020+, 现代浏览器
- 不添加已弃用方法的兼容代码
- 优先使用原生特性而非 polyfill

#### 无障碍访问

所有组件需要提供基本的无障碍支持：

- 使用语义化的 HTML 标签和 ARIA 角色
- 提供必要的 ARIA 属性 (`aria-describedby`, `role` 等)
- 确保键盘导航支持
- 生成唯一 ID 用于元素关联

#### TypeScript

```typescript
// ✅ 推荐
interface ComponentProps {
  /** 属性描述 */
  label: string;
  /** 是否禁用 */
  disabled?: boolean;
}

// ❌ 避免
const props: any = {};
```

#### Vue 组件

```vue
<!-- ✅ 推荐的组件结构 -->
<template>
  <div class="component-name">
    <!-- 模板内容 -->
  </div>
</template>

<script setup lang="ts">
// 导入
import { ref } from 'vue';

// 组件配置
defineOptions({
  name: 'ComponentName',
});

// 属性和事件
const props = defineProps(/* ... */);
const emit = defineEmits(/* ... */);

// 逻辑代码
</script>

<!-- 样式注释 -->
```

#### 样式规范

```scss
// ✅ 推荐的 SCSS 结构
.component-name {
  // 基础样式
  display: block;

  // 修饰符
  &--modifier {
    // 修饰符样式
  }

  // 子元素
  &__element {
    // 子元素样式
  }

  // 状态
  &:hover,
  &:focus {
    // 状态样式
  }
}
```

## 🔍 开发检查清单

### ✅ 代码质量

- [ ] 代码通过 TypeScript 类型检查
- [ ] 遵循项目代码风格
- [ ] 添加必要的注释
- [ ] 移除 console.log 等调试代码

### 🧪 功能测试

- [ ] 功能正常工作
- [ ] 边界情况处理
- [ ] 不破坏现有功能
- [ ] Storybook 故事更新

### 📚 文档更新

- [ ] 更新 API 文档
- [ ] 添加使用示例
- [ ] 更新 CHANGELOG.md
- [ ] README 信息同步

### 🎨 样式检查

- [ ] 响应式设计
- [ ] 浏览器兼容性
- [ ] 无样式冲突
- [ ] 可访问性支持

## 📝 Pull Request 流程

### 1. 提交前检查

```bash
# 完整代码质量检查
npm run check

# 构建测试
npm run build

# Storybook 构建
npm run build-storybook
```

### 2. 创建 Pull Request

- 清晰的标题和描述
- 链接相关 Issue
- 添加截图或 GIF 演示
- 说明变更内容和影响

### 3. PR 模板

```markdown
## 📋 变更类型

- [ ] Bug 修复
- [ ] 新功能
- [ ] 文档更新
- [ ] 重构
- [ ] 其他

## 🎯 变更描述

简要描述此次变更的内容和目的

## 📸 截图/演示

如果有 UI 变更，请提供截图或 GIF

## ✅ 检查清单

- [ ] 代码通过类型检查
- [ ] 功能测试通过
- [ ] 文档已更新
- [ ] 无破坏性变更

## 🔗 相关 Issue

Closes #issue_number
```

### 4. 代码审查

- 响应审查意见
- 及时修改代码
- 保持分支更新

## 🏷️ 版本发布

### 语义化版本

- `MAJOR.MINOR.PATCH`
- **MAJOR**: 破坏性变更
- **MINOR**: 新功能添加
- **PATCH**: Bug 修复

### 发布流程

1. 更新版本号
2. 更新 CHANGELOG.md
3. 创建发布标签
4. 发布到 npm

## 🛠️ 组件开发流程

### 1. 创建新组件

```bash
# 在 src/components/ 下创建组件目录
mkdir src/components/NewComponent
cd src/components/NewComponent
```

### 2. 组件文件结构

```
NewComponent/
├── NewComponent.vue         # 主组件文件
├── new-component-types.ts   # 类型定义
├── use-new-component.ts     # Composable 逻辑
├── new-component.scss       # 样式文件
├── NewComponent.stories.ts  # Storybook 故事
└── index.ts                # 导出配置
```

### 3. 更新主入口

```typescript
// src/index.ts
export { default as NewComponent } from './components/NewComponent';
export * from './components/NewComponent/new-component-types';
```

### 4. 编写 Storybook 文档

创建丰富的故事和文档：

- 基础使用示例
- 高级用法演示
- 所有属性变化展示
- 事件处理示例

## 📞 获取帮助

### 💬 讨论

- [GitHub Discussions](https://github.com/xbghc/vue-ui/discussions) - 社区讨论
- [GitHub Issues](https://github.com/xbghc/vue-ui/issues) - 问题报告

### 📚 开发资源

- [开发环境搭建](/docs/development-setup--docs) - 本地开发配置
- [代码规范](/docs/development-code-standards--docs) - ESLint、Prettier 配置
- [Storybook 指南](/docs/development-storybook--docs) - Storybook 开发说明

### 📧 联系方式

- 邮箱: ghm20191606@gmail.com
- GitHub: [@xbghc](https://github.com/xbghc)

## 🎯 贡献建议

### 新手友好的任务

- 改进文档和示例
- 修复小的 Bug
- 添加新的 Storybook 故事
- 优化组件样式

### 高级任务

- 实现新组件
- 性能优化
- 架构改进
- 添加测试用例

## 🙏 致谢

感谢所有为项目做出贡献的开发者！

### 特别感谢

- Vue.js 团队 - 提供优秀的框架
- Storybook 团队 - 组件开发工具
- 所有提供反馈和建议的用户

---

🎉 **再次感谢您的贡献！每一个 PR 都让项目变得更好！**
